\RequirePackage{pdfmanagement-testphase}
\DeclareDocumentMetadata{}
\documentclass[a3paper,openany,twoside]{book}

\newcommand{\PATH}{../../../../}

\usepackage{\PATH templates/utilities/image-db}
\usepackage{\PATH templates/utilities/m4rz-fonts}
\usepackage{\PATH templates/utilities/m4rz-colors}
\usepackage{\PATH templates/utilities/miscellaneous}
\usepackage{\PATH templates/utilities/shadowfy}

\usepackage[justified]{\PATH templates/template_dnd/dnd}

\usepackage{\PATH templates/template_dungeon/dungeon_commands}

\geometry{landscape}

\begin{document}
	\DungeonSheetGeometry
	
	\thispagestyle{empty}
	\def\scaleFactor{1.9}
	
	\pgfmathsetmacro{\shadowXShift}{0.4*\scaleFactor}%
	\pgfmathsetmacro{\shadowYShift}{-0.4*\scaleFactor}%
	
	\begin{tikzpicture}[
		outer sep=0pt,
		inner sep=0pt,
		every shadow/.style={
			opacity=.8,
			fill=black,
			shadow xshift=\shadowXShift ex,
			shadow yshift=\shadowYShift ex
		},
		remember picture,
		overlay
	]
		\begin{scope}[scale=\scaleFactor, xshift=-11.25cm, yshift=-14.65cm]
			\input{Central_Park_Zoo_input.tex}
		\end{scope}
		
		% Outer Frame
		\begin{scope}[scale=\scaleFactor, xshift=-11cm, yshift=-14.65cm]
			% Wooden Frame
			\begin{scope}[scale=0.25, xshift=2\paperwidth, yshift=31cm]
				\path[draw, thick] (0,29.5)%
					-- ++(33,0) -- ++(0,-60) -- ++(-68,0) -- ++(0,60) -- cycle;%
				\path[clip] (0,30)%
					-- ++(42.5,0) -- ++(0,-62)-- ++(-82.5,0) -- ++(0,62) -- ++(40,0)%
					-- ++(0,-0.5) -- ++(-35,0) -- ++(0,-60) -- ++(68,0) -- ++(0,60) -- ++(-33,0) -- cycle;%
				\pgfmathsetmacro{\scaledWidth}{1.25*\scaleFactor}%
				\foreach \x in {0,...,21} {%
					\node at (-37.5 + 5*\x, 30) {%
						\includegraphics[width=\scaledWidth cm, height=\scaledWidth cm] {%
							\ASSETPATH Textures/Artificial_Textures/Wood/Wood_Texture_B_Walnut_5x5%
						}%
					};%
					\node at (-37.5 + 5*\x, -30) {%
						\includegraphics[width=\scaledWidth cm, height=\scaledWidth cm] {%
							\ASSETPATH Textures/Artificial_Textures/Wood/Wood_Texture_B_Walnut_5x5%
						}%
					};%
				}%
				\foreach \y in {0,...,13} {%
					\node at (-37.5, 25 - 5*\y) {%
						\includegraphics[width=\scaledWidth cm, height=\scaledWidth cm] {%
							\ASSETPATH Textures/Artificial_Textures/Wood/Wood_Texture_B_Walnut_5x5%
						}%
					};%
					\node at (42.5, 25 - 5*\y) {%
						\includegraphics[width=\scaledWidth cm, height=\scaledWidth cm] {%
							\ASSETPATH Textures/Artificial_Textures/Wood/Wood_Texture_B_Walnut_5x5%
						}%
					};%
					\node at (37.5, 25 - 5*\y) {%
						\includegraphics[width=\scaledWidth cm, height=\scaledWidth cm] {%
							\ASSETPATH Textures/Artificial_Textures/Wood/Wood_Texture_B_Walnut_5x5%
						}%
					};%
					\node at (32.5, 25 - 5*\y) {%
						\includegraphics[width=\scaledWidth cm, height=\scaledWidth cm] {%
							\ASSETPATH Textures/Artificial_Textures/Wood/Wood_Texture_B_Walnut_5x5%
						}%
					};%
				}%
			\end{scope}
			% Legend
			\begin{scope}[scale=0.25, xshift=2\paperwidth, yshift=31cm]
				\pgfmathsetmacro{\widthLegend}{2.1*\scaleFactor}%
				\def\verticalShift{1.75em}
				\node[text width=\widthLegend cm, white, font=\large, anchor=west] at (33.5,-1) {%
					\inTextCircled[10]{1}{10} Penguin Habitat\\\vspace*{\verticalShift}
					\inTextCircled[10]{2}{10} Lemur Habitat\\\vspace*{\verticalShift}
					\inTextCircled[10]{3}{10} Monkey Habitat\\\vspace*{\verticalShift}
					\inTextCircled[10]{4}{10} Flamingo Habitat\\\vspace*{\verticalShift}
					\inTextCircled[10]{5}{10} Otter Habitat\\\vspace*{\verticalShift}
					\inTextCircled[10]{6}{10} Main Gate\\\vspace*{\verticalShift}
					\inTextCircled[10]{7}{10} Polar Bear Habitat\\\vspace*{\verticalShift}
					\inTextCircled[10]{8}{10} Souvenir Shop\\\vspace*{\verticalShift}
					\inTextCircled[10]{9}{10} Lion Habitat\\\vspace*{\verticalShift}
					\inTextCircled[10]{10}{10} Giraffe Habitat\\\vspace*{\verticalShift}
					\inTextCircled[10]{11}{10} Hippopotamus Habitat\\\vspace*{\verticalShift}
					\inTextCircled[10]{12}{10} Zebra Habitat\\\vspace*{\verticalShift}
					\inTextCircled[10]{13}{10} Crocodile Habitat\\\vspace*{\verticalShift}
					\inTextCircled[10]{14}{10} Reptile House\\\vspace*{\verticalShift}
					\inTextCircled[10]{15}{10} Rhinoceros Habitat\\\vspace*{\verticalShift}
					\inTextCircled[10]{16}{10} Camel Habitat\\\vspace*{\verticalShift}
					\inTextCircled[10]{17}{10} Ostrich Habitat\\\vspace*{\verticalShift}
					\inTextCircled[10]{18}{10} Arsenal\\\vspace*{\verticalShift}
					\inTextCircled[10]{19}{10} Elephant Habitat
				};%
			\end{scope}
			% Metal Frame
			\begin{scope}[scale=0.25, xshift=2\paperwidth, yshift=31cm]
				\path[draw, thick] (0,30)%
					-- ++(37.5,0) arc[start angle=90, end angle=0, radius=5] -- ++(0,-51) arc[start angle=0, end angle=-90, radius=5] -- ++(-72.5,0) arc[start angle=270, end angle=180, radius=5] -- ++(0,51) arc[start angle=180, end angle=90, radius=5] -- cycle;%
				\path[clip, drop shadow] (0,31)%
					--	++(-50,0) -- ++(0,-70) -- ++(100,0) -- ++(0,70) -- ++(-50,0) -- ++(0,-1)%
					-- ++(37.5,0) arc[start angle=90, end angle=0, radius=5] -- ++(0,-51) arc[start angle=0, end angle=-90, radius=5] -- ++(-72.5,0) arc[start angle=270, end angle=180, radius=5] -- ++(0,51) arc[start angle=180, end angle=90, radius=5] -- ++(35,0) -- cycle;%
				
				\foreach \x in {0,...,22} {%
					\node at (-44 + 4*\x, 29) {%
						\includegraphics[width=\scaleFactor cm, height=\scaleFactor cm] {%
							\ASSETPATH Textures/Artificial_Textures/Metal/Metal_Floor_05_A1%
						}%
					};%
					\node at (-44 + 4*\x, -31) {%
						\includegraphics[width=\scaleFactor cm, height=\scaleFactor cm] {%
							\ASSETPATH Textures/Artificial_Textures/Metal/Metal_Floor_05_A1%
						}%
					};%
				}%
				\foreach \y in {0,...,13} {%
					\node at (-44, 25 - 4*\y) {%
						\includegraphics[width=\scaleFactor cm, height=\scaleFactor cm] {%
							\ASSETPATH Textures/Artificial_Textures/Metal/Metal_Floor_05_A1%
						}%
					};%
					\node at (-40, 25 - 4*\y) {%
						\includegraphics[width=\scaleFactor cm, height=\scaleFactor cm] {%
							\ASSETPATH Textures/Artificial_Textures/Metal/Metal_Floor_05_A1%
						}%
					};%
					\node at (44, 25 - 4*\y) {%
						\includegraphics[width=\scaleFactor cm, height=\scaleFactor cm] {%
							\ASSETPATH Textures/Artificial_Textures/Metal/Metal_Floor_05_A1%
						}%
					};%
				}%
				\node at (40, -27) {%
					\includegraphics[width=\scaleFactor cm, height=\scaleFactor cm] {%
						\ASSETPATH Textures/Artificial_Textures/Metal/Metal_Floor_05_A1%
					}%
				};%
			\end{scope}
		\end{scope}
	\end{tikzpicture}
\end{document}
